\hypertarget{class_sistema}{\section{\-Referencia de la \-Clase \-Sistema}
\label{class_sistema}\index{\-Sistema@{\-Sistema}}
}


\-Representa el sistema donde se desarrollan los experimentos.  


\subsection*{\-Métodos públicos}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_sistema_a815b07845ef6b03247b239333fe75e28}{\-Sistema} ()
\begin{DoxyCompactList}\small\item\em \-Creadora por defecto. \end{DoxyCompactList}\item 
\hyperlink{class_sistema_aafc86e0f2c3d734fb4c0985f70c27a1a}{$\sim$\-Sistema} ()
\begin{DoxyCompactList}\small\item\em \-Destructora por defecto. \end{DoxyCompactList}\item 
void \hyperlink{class_sistema_a6522b718fc0701d38c2e2d2c2d2e88a6}{anadir\-\_\-organismo} (\hyperlink{class_organismo}{\-Organismo} \&o, bool \&sobrevive)
\begin{DoxyCompactList}\small\item\em \-Modificadora que gestiona el intento de entrada de un organismo en el sistema. \end{DoxyCompactList}\item 
void \hyperlink{class_sistema_ae670549104642dd4664ac8f794b4b1e9}{leer} (int \-N)
\begin{DoxyCompactList}\small\item\em \-Operación de lectura. \end{DoxyCompactList}\item 
void \hyperlink{class_sistema_a3f2a05a17345ee3be8331950fb2eedc0}{escribir} (bool tipo, bool estr) const 
\begin{DoxyCompactList}\small\item\em \-Operación de escritura. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Métodos privados estáticos}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{class_sistema_a9123a18225eece5cf29d0d59067ac509}{luchas\-\_\-org\-\_\-cola} (queue$<$ \hyperlink{class_organismo}{\-Organismo} $>$ \&c, \hyperlink{class_organismo}{\-Organismo} \&o, bool \&sobrevive)
\begin{DoxyCompactList}\small\item\em \-Lucha de un organismo contra los organismos de una cola. \end{DoxyCompactList}\item 
static void \hyperlink{class_sistema_afaa4f1c2cce4c63faf03ee01265f5320}{clear} (queue$<$ \hyperlink{class_organismo}{\-Organismo} $>$ \&q)
\begin{DoxyCompactList}\small\item\em \-Elimina todos los elementos de una cola de organismos. \end{DoxyCompactList}\item 
static void \hyperlink{class_sistema_a251ac725ddac0022e4845faec14004ef}{recolocar} (int n, queue$<$ \hyperlink{class_organismo}{\-Organismo} $>$ \&c)
\begin{DoxyCompactList}\small\item\em \-Pasa los n primeros organismos de una cola al final de ésta, conservando el orden relativo. \end{DoxyCompactList}\item 
static void \hyperlink{class_sistema_aa5e14a3c6ccd53bf61020d69e03b136d}{escribir\-\_\-sistema\-\_\-cola} (const queue$<$ \hyperlink{class_organismo}{\-Organismo} $>$ \&c, bool estr)
\begin{DoxyCompactList}\small\item\em \-Operación de escritura de una cola de organismos. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Atributos privados}
\begin{DoxyCompactItemize}
\item 
queue$<$ \hyperlink{class_organismo}{\-Organismo} $>$ \hyperlink{class_sistema_a7311a56f7b8336096ca52a744c4d3804}{def}
\begin{DoxyCompactList}\small\item\em \-Cola de organismos defensivos. \end{DoxyCompactList}\item 
queue$<$ \hyperlink{class_organismo}{\-Organismo} $>$ \hyperlink{class_sistema_a11fa1af3dde26025dd10b3ac103f426e}{mal}
\begin{DoxyCompactList}\small\item\em \-Cola de organismos malignos. \end{DoxyCompactList}\item 
int \hyperlink{class_sistema_a69ba5e2cce55afc2a47d899a1100a42a}{id}
\begin{DoxyCompactList}\small\item\em \-Primer número disponible de identificador de organismo. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{\-Descripción detallada}
\-Representa el sistema donde se desarrollan los experimentos. 

\-Ofrece operaciones para introducir un organismo en el sistema, de lectura y escritura del sistema. 

\-Definición en la línea 21 del archivo \-Sistema.\-hh.



\subsection{\-Documentación del constructor y destructor}
\hypertarget{class_sistema_a815b07845ef6b03247b239333fe75e28}{\index{\-Sistema@{\-Sistema}!\-Sistema@{\-Sistema}}
\index{\-Sistema@{\-Sistema}!Sistema@{\-Sistema}}
\subsubsection[{\-Sistema}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Sistema\-::\-Sistema} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_sistema_a815b07845ef6b03247b239333fe75e28}


\-Creadora por defecto. 

\begin{DoxyPrecond}{\-Precondición}
cierto 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondición}
\-El resultado es un sistema en que no ha entrado ningún organismo 
\end{DoxyPostcond}


\-Definición en la línea 7 del archivo \-Sistema.\-cc.


\begin{DoxyCode}
{
  id = 1;
}
\end{DoxyCode}
\hypertarget{class_sistema_aafc86e0f2c3d734fb4c0985f70c27a1a}{\index{\-Sistema@{\-Sistema}!$\sim$\-Sistema@{$\sim$\-Sistema}}
\index{$\sim$\-Sistema@{$\sim$\-Sistema}!Sistema@{\-Sistema}}
\subsubsection[{$\sim$\-Sistema}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Sistema\-::$\sim$\-Sistema} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_sistema_aafc86e0f2c3d734fb4c0985f70c27a1a}


\-Destructora por defecto. 



\-Definición en la línea 12 del archivo \-Sistema.\-cc.


\begin{DoxyCode}
{}
\end{DoxyCode}


\subsection{\-Documentación de las funciones miembro}
\hypertarget{class_sistema_a6522b718fc0701d38c2e2d2c2d2e88a6}{\index{\-Sistema@{\-Sistema}!anadir\-\_\-organismo@{anadir\-\_\-organismo}}
\index{anadir\-\_\-organismo@{anadir\-\_\-organismo}!Sistema@{\-Sistema}}
\subsubsection[{anadir\-\_\-organismo}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Sistema\-::anadir\-\_\-organismo} (
\begin{DoxyParamCaption}
\item[{{\bf \-Organismo} \&}]{o, }
\item[{bool \&}]{sobrevive}
\end{DoxyParamCaption}
)}}\label{class_sistema_a6522b718fc0701d38c2e2d2c2d2e88a6}


\-Modificadora que gestiona el intento de entrada de un organismo en el sistema. 

\begin{DoxyPrecond}{\-Precondición}
o es un organismo sin identificador 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondición}
\-El parámetro implícito contiene el estado del sistema después del intento de entrada del organismo o; o pasa a tener identificador y a contener el número de organismos que ha destruido; sobrevive indica si o queda vivo en el parámetro implícito o no 
\end{DoxyPostcond}


\-Definición en la línea 14 del archivo \-Sistema.\-cc.


\begin{DoxyCode}
{
// Proporciona su identificador al nuevo organismo y organiza las luchas de
// éste. Para ello, emplea la operación privada "luchas_org_cola" que lo
       enfrenta
// a los de la cola correspondiente y obtiene la información necesaria.
   o.anadir_id(id);
   ++id;
   if (o.es_maligno()) { 
      luchas_org_cola(def, o, sobrevive);
      if (sobrevive) mal.push(o);
   }
   else {
      luchas_org_cola(mal, o, sobrevive);
      if (sobrevive) def.push(o);
   }
}
\end{DoxyCode}
\hypertarget{class_sistema_ae670549104642dd4664ac8f794b4b1e9}{\index{\-Sistema@{\-Sistema}!leer@{leer}}
\index{leer@{leer}!Sistema@{\-Sistema}}
\subsubsection[{leer}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Sistema\-::leer} (
\begin{DoxyParamCaption}
\item[{int}]{\-N}
\end{DoxyParamCaption}
)}}\label{class_sistema_ae670549104642dd4664ac8f794b4b1e9}


\-Operación de lectura. 

\begin{DoxyPrecond}{\-Precondición}
\-N$>$0 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondición}
\-El parámetro implícito está formado por un grupo de organismos leídos por el canal de entrada estándard y formados por celulas de \-N parámetros 
\end{DoxyPostcond}


\-Definición en la línea 109 del archivo \-Sistema.\-cc.


\begin{DoxyCode}
{
// Esta operación actualiza todos los componentes de un sistema, leyéndolos
// del canal estándar; ofrece la posiblidad de leer y almacenar algunos
// organismos defensivos.  El número de éstos se proporciona al comienzo de
// la operación.

  clear(def);
  clear(mal);  
  int num = readint();
  Organismo o;
  for (int i = 1; i <= num; ++i) {  
    o.leer(N); 
    o.anadir_id(i); 
    if (o.es_maligno()) mal.push(o);
    else def.push(o);
  }
  id = num+1;
}
\end{DoxyCode}
\hypertarget{class_sistema_a3f2a05a17345ee3be8331950fb2eedc0}{\index{\-Sistema@{\-Sistema}!escribir@{escribir}}
\index{escribir@{escribir}!Sistema@{\-Sistema}}
\subsubsection[{escribir}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Sistema\-::escribir} (
\begin{DoxyParamCaption}
\item[{bool}]{tipo, }
\item[{bool}]{estr}
\end{DoxyParamCaption}
) const}}\label{class_sistema_a3f2a05a17345ee3be8331950fb2eedc0}


\-Operación de escritura. 

\begin{DoxyPrecond}{\-Precondición}
cierto 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondición}
\-Si tipo es cierto, se han escrito en el canal de salida estándard, por orden de identificador, los organismos defensivos del parámetro implícito, en caso contrario se han escrito los malignos; si estr es cierto, cada organismo se escribe con su estructura celular, en caso contrario sólo se escribe su identificador 
\end{DoxyPostcond}


\-Definición en la línea 129 del archivo \-Sistema.\-cc.


\begin{DoxyCode}
{
// Esta operación simplemente recorre la cola de los organismos pedidos,
// proporcionando la información requerida, mediante una operación privada
// auxiliar: "escribir_sistema_cola".

  if (tipo) escribir_sistema_cola(def, estr);
  else escribir_sistema_cola(mal, estr);
}
\end{DoxyCode}
\hypertarget{class_sistema_a9123a18225eece5cf29d0d59067ac509}{\index{\-Sistema@{\-Sistema}!luchas\-\_\-org\-\_\-cola@{luchas\-\_\-org\-\_\-cola}}
\index{luchas\-\_\-org\-\_\-cola@{luchas\-\_\-org\-\_\-cola}!Sistema@{\-Sistema}}
\subsubsection[{luchas\-\_\-org\-\_\-cola}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Sistema\-::luchas\-\_\-org\-\_\-cola} (
\begin{DoxyParamCaption}
\item[{queue$<$ {\bf \-Organismo} $>$ \&}]{c, }
\item[{{\bf \-Organismo} \&}]{o, }
\item[{bool \&}]{sobrevive}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static, private\mbox{]}}}}\label{class_sistema_a9123a18225eece5cf29d0d59067ac509}


\-Lucha de un organismo contra los organismos de una cola. 

\begin{DoxyPrecond}{\-Precondición}
c = \-C; \-C está ordenada crecientemente según los identificadores de sus organismos 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondición}
c contiene los organismos de \-C, ordenados crecientemente por identificador y con su contador de víctimas actualizado, excepto los que hayan muerto al enfrentarse con o; sobrevive indica si o queda vivo despues de sus enfrentamientos; o pasa a contener el número de organismos que ha destruido 
\end{DoxyPostcond}


\-Definición en la línea 31 del archivo \-Sistema.\-cc.


\begin{DoxyCode}
{
// Busca el primer organismo de la cola c que consigue matar al organismo o y
// borra (y cuenta) todos los que resultan destruidos por éste. Para que el
// borrado sea efectivo, los supervivientes se van añadiendo al final de la 
// cola. Al final, los que no hayan luchado se pasan al final la cola mediante
// una nueva operación privada auxiliar: "recolocar".

   Organismo actual; 
   int resultado; 
 
   sobrevive = true;
   int long_cola = c.size();
  
// Inv: sobrevive = ninguno de los elementos visitados de C destruye a o;
//      c = elementos no visitados de C seguidos por los elementos visitados
//      con su contador de víctimas actualizado, excepto los que hayan muerto 
//      al enfrentarse con o, en el mismo orden en que estaban en C;
//      long_cola = número de elementos no visitados de C;
//      o tiene actualizado su contador de víctimas
// 
// Cota: long_cola

   while (long_cola>0 and sobrevive) {
      actual = c.front();
      resultado = o.lucha_organismos(actual);
      switch (resultado) {
         case 0: {                    // los dos mueren
            sobrevive = false;        // no actualizamos las víctimas de actual
       
            o.incrementar_victimas(); // porque éste ya no pertenece al sistema
            break;
         } 
         case 1: {                    // o muere, actual sobrevive
            sobrevive= false;
            actual.incrementar_victimas();
            c.push(actual);
            break;
         }
         case 2: {                    // o sobrevive, actual muere
            o.incrementar_victimas();
            break;
         }
         case 3: {                    // los dos sobreviven
            c.push(actual);
            break;
         }
      }
      c.pop();
      --long_cola;
   }

// Post1: Inv1 y (long_cola == 0 or not sobrevive)

// Falta pasar al final de c los elementos no visitados de C (por Inv1, son
// los long_cola primeros de c), para mantener el orden por identificador

   recolocar(long_cola,c);
}
\end{DoxyCode}
\hypertarget{class_sistema_afaa4f1c2cce4c63faf03ee01265f5320}{\index{\-Sistema@{\-Sistema}!clear@{clear}}
\index{clear@{clear}!Sistema@{\-Sistema}}
\subsubsection[{clear}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Sistema\-::clear} (
\begin{DoxyParamCaption}
\item[{queue$<$ {\bf \-Organismo} $>$ \&}]{q}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static, private\mbox{]}}}}\label{class_sistema_afaa4f1c2cce4c63faf03ee01265f5320}


\-Elimina todos los elementos de una cola de organismos. 

\begin{DoxyPrecond}{\-Precondición}
c = \-C; 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondición}
c es vacía 
\end{DoxyPostcond}


\-Definición en la línea 104 del archivo \-Sistema.\-cc.


\begin{DoxyCode}
{
  while (not q.empty()) q.pop();
}
\end{DoxyCode}
\hypertarget{class_sistema_a251ac725ddac0022e4845faec14004ef}{\index{\-Sistema@{\-Sistema}!recolocar@{recolocar}}
\index{recolocar@{recolocar}!Sistema@{\-Sistema}}
\subsubsection[{recolocar}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Sistema\-::recolocar} (
\begin{DoxyParamCaption}
\item[{int}]{n, }
\item[{queue$<$ {\bf \-Organismo} $>$ \&}]{c}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static, private\mbox{]}}}}\label{class_sistema_a251ac725ddac0022e4845faec14004ef}


\-Pasa los n primeros organismos de una cola al final de ésta, conservando el orden relativo. 

\begin{DoxyPrecond}{\-Precondición}
n = \-N $<$= c.\-size(), c = \-C; 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondición}
c contiene los mismos elementos que \-C, pero los \-N primeros elementos de \-C están al final de c, en el orden relativo original; los restantes también conservan su orden relativo original 
\end{DoxyPostcond}


\-Definición en la línea 90 del archivo \-Sistema.\-cc.


\begin{DoxyCode}
{
  // Inv:  n<=N, c contiene los mismos elementos que C, pero los N-n primeros 
  //       elementos de C están al final de c, en el orden relativo original;
  //       los restantes también conservan su orden relativo original
  // Cota: n

  while (n>0) {
    c.push(c.front());
    c.pop();
    --n;
  } 
}
\end{DoxyCode}
\hypertarget{class_sistema_aa5e14a3c6ccd53bf61020d69e03b136d}{\index{\-Sistema@{\-Sistema}!escribir\-\_\-sistema\-\_\-cola@{escribir\-\_\-sistema\-\_\-cola}}
\index{escribir\-\_\-sistema\-\_\-cola@{escribir\-\_\-sistema\-\_\-cola}!Sistema@{\-Sistema}}
\subsubsection[{escribir\-\_\-sistema\-\_\-cola}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Sistema\-::escribir\-\_\-sistema\-\_\-cola} (
\begin{DoxyParamCaption}
\item[{const queue$<$ {\bf \-Organismo} $>$ \&}]{c, }
\item[{bool}]{estr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static, private\mbox{]}}}}\label{class_sistema_aa5e14a3c6ccd53bf61020d69e03b136d}


\-Operación de escritura de una cola de organismos. 

\begin{DoxyPrecond}{\-Precondición}
cierto 
\end{DoxyPrecond}
\begin{DoxyPostcond}{\-Postcondición}
\-Se han escrito en el canal estándar de salida los organismos de c, por orden de identificador; si estr es cierto, cada organismo se escribe con su estructura celular, en caso contrario sólo se escribe su identificador 
\end{DoxyPostcond}


\-Definición en la línea 139 del archivo \-Sistema.\-cc.


\begin{DoxyCode}
{
  queue<Organismo> aux(c);
  while (not aux.empty()) {
    aux.front().escribir(estr);
    aux.pop();
  }
}
\end{DoxyCode}


\subsection{\-Documentación de los datos miembro}
\hypertarget{class_sistema_a7311a56f7b8336096ca52a744c4d3804}{\index{\-Sistema@{\-Sistema}!def@{def}}
\index{def@{def}!Sistema@{\-Sistema}}
\subsubsection[{def}]{\setlength{\rightskip}{0pt plus 5cm}queue$<${\bf \-Organismo}$>$ {\bf \-Sistema\-::def}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{class_sistema_a7311a56f7b8336096ca52a744c4d3804}


\-Cola de organismos defensivos. 

\-Ordenada crecientemente por el id de sus componentes 

\-Definición en la línea 37 del archivo \-Sistema.\-hh.

\hypertarget{class_sistema_a11fa1af3dde26025dd10b3ac103f426e}{\index{\-Sistema@{\-Sistema}!mal@{mal}}
\index{mal@{mal}!Sistema@{\-Sistema}}
\subsubsection[{mal}]{\setlength{\rightskip}{0pt plus 5cm}queue$<${\bf \-Organismo}$>$ {\bf \-Sistema\-::mal}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{class_sistema_a11fa1af3dde26025dd10b3ac103f426e}


\-Cola de organismos malignos. 

\-Ordenada crecientemente por el id de sus componentes 

\-Definición en la línea 42 del archivo \-Sistema.\-hh.

\hypertarget{class_sistema_a69ba5e2cce55afc2a47d899a1100a42a}{\index{\-Sistema@{\-Sistema}!id@{id}}
\index{id@{id}!Sistema@{\-Sistema}}
\subsubsection[{id}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf \-Sistema\-::id}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}\label{class_sistema_a69ba5e2cce55afc2a47d899a1100a42a}


\-Primer número disponible de identificador de organismo. 



\-Definición en la línea 45 del archivo \-Sistema.\-hh.



\-La documentación para esta clase fue generada a partir de los siguientes ficheros\-:\begin{DoxyCompactItemize}
\item 
\hyperlink{_sistema_8hh}{\-Sistema.\-hh}\item 
\hyperlink{_sistema_8cc}{\-Sistema.\-cc}\end{DoxyCompactItemize}
